<!DOCTYPE html>
<html lang="tr">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>GeliÅŸmiÅŸ KiÅŸisel Finans YÃ¶neticisi</title>
    <link rel="stylesheet" href="style.css">
</head>
<body>
    <!-- Login Screen - GiriÅŸ EkranÄ± -->
    <div id="loginScreen" class="login-screen">
        <!-- Login container - giriÅŸ formu container'Ä± -->
        <div class="login-container">
            <!-- Uygulama baÅŸlÄ±ÄŸÄ± -->
            <h1>ğŸ’° Finans YÃ¶neticisi</h1>
            
            <div id="loginForm">
                <!-- KullanÄ±cÄ± adÄ± form grubu -->
                <div class="form-group">
                    <label for="username">KullanÄ±cÄ± AdÄ±:</label>
                    <input type="text" id="username" required>
                </div>
                <!-- Åifre form grubu -->
                <div class="form-group">
                    <label for="password">Åifre:</label>
                    <input type="password" id="password" required>
                </div>
                <!-- GiriÅŸ yap butonu -->
                <button class="btn" onclick="login()">GiriÅŸ Yap</button>
                <!-- KayÄ±t ol butonu -->
                <button class="btn btn-secondary" onclick="showRegister()">KayÄ±t Ol</button>
            </div>
            
            <!-- KayÄ±t formu (baÅŸlangÄ±Ã§ta gizli) -->
            <div id="registerForm" class="hidden">
                <!-- Ad soyad form grubu -->
                <div class="form-group">
                    <label for="regFullName">Ad Soyad:</label>
                    <input type="text" id="regFullName" required>
                </div>
                <!-- KullanÄ±cÄ± adÄ± form grubu -->
                <div class="form-group">
                    <label for="regUsername">KullanÄ±cÄ± AdÄ±:</label>
                    <input type="text" id="regUsername" required>
                </div>
                <!-- Åifre form grubu -->
                <div class="form-group">
                    <label for="regPassword">Åifre:</label>
                    <input type="password" id="regPassword" required>
                </div>
                <!-- E-posta form grubu -->
                <div class="form-group">
                    <label for="regEmail">E-posta:</label>
                    <input type="email" id="regEmail" required>
                </div>
                <!-- KayÄ±t ol butonu -->
                <button class="btn btn-success" onclick="register()">KayÄ±t Ol</button>
                <!-- GiriÅŸ ekranÄ±na dÃ¶n butonu -->
                <button class="btn btn-secondary" onclick="showLogin()">GiriÅŸ EkranÄ±na DÃ¶n</button>
            </div>
            <!-- Kimlik doÄŸrulama mesaj alanÄ± -->
            <div id="authMessage"></div>
        </div>
    </div>

    <!-- Main Application - Ana Uygulama (baÅŸlangÄ±Ã§ta gizli) -->
    <div id="mainApp" class="container hidden">
        <!-- Header - Ãœst baÅŸlÄ±k bÃ¶lÃ¼mÃ¼ -->
        <div class="header">
            <!-- Header iÃ§erik -->
            <div class="header-content">
                <h1>ğŸ’° KiÅŸisel Finans YÃ¶neticisi</h1>
                <p>Gelir ve giderlerinizi kolayca takip edin ve kontrol altÄ±nda tutun</p>
            </div>
            <!-- KullanÄ±cÄ± bilgileri -->
            <div class="user-info">
                <h3>HoÅŸ geldin, <span id="currentUserName"></span>!</h3>
                <button class="btn btn-logout" onclick="logout()">Ã‡Ä±kÄ±ÅŸ Yap</button>
            </div>
        </div>

        <!-- Ana iÃ§erik bÃ¶lÃ¼mÃ¼ -->
        <div class="main-content">
            <!-- Ã–zet KartlarÄ± - toplam gelir, gider, bakiye gÃ¶sterimi -->
            <div class="summary-cards">
                <!-- Toplam gelir kartÄ± -->
                <div class="card income">
                    <h3>ğŸ“ˆ Toplam Gelir</h3>
                    <div class="amount" id="totalIncome">â‚º0.00</div>
                </div>
                <!-- Toplam gider kartÄ± -->
                <div class="card expense">
                    <h3>ğŸ“‰ Toplam Gider</h3>
                    <div class="amount" id="totalExpense">â‚º0.00</div>
                </div>
                <!-- Net bakiye kartÄ± -->
                <div class="card balance">
                    <h3>ğŸ’³ Net Bakiye</h3>
                    <div class="amount" id="netBalance">â‚º0.00</div>
                </div>
            </div>  

            <!-- Grafik GÃ¶sterimi - pasta grafiÄŸi container'Ä± -->
            <div class="chart-container">
                <h3 class="chart-title">ğŸ“Š Gelir-Gider GrafiÄŸi</h3>
                <!-- Canvas elementi grafik Ã§izimi iÃ§in -->
                <canvas id="incomeExpenseChart" width="400" height="400"></canvas>
            </div>

            <!-- Kategori Analizi - gider kategorilerinin analizi -->
            <div class="category-analysis">
                <h3 class="section-title">ğŸ·ï¸ Kategori BazlÄ± Analiz</h3>
                <!-- Kategori istatistikleri container'Ä± -->
                <div class="category-stats" id="categoryStats"></div>
            </div>

            <!-- Kategori YÃ¶netimi - yeni kategori ekleme ve mevcut kategorileri gÃ¶rÃ¼ntÃ¼leme -->
            <div class="category-manager">
                <h3>ğŸ·ï¸ Gider Kategori YÃ¶netimi</h3>
                <div class="form-row">
                    <!-- Yeni kategori giriÅŸi -->
                    <div class="form-group">
                        <input type="text" id="newCategory" placeholder="Yeni kategori adÄ±">
                    </div>
                    <!-- Kategori ekleme butonu -->
                    <div class="form-group">
                        <button class="btn btn-success" onclick="addCategory()">Kategori Ekle</button>
                    </div>
                </div>
                <!-- Mevcut kategorilerin listesi -->
                <div class="category-list" id="categoryList"></div>
            </div>

            <!-- VERÄ° EKLEME FORMU BÃ–LÃœMÃœ -->
            <!-- Bu bÃ¶lÃ¼m yeni gelir/gider kayÄ±tlarÄ± eklemek iÃ§in kullanÄ±lÄ±r -->
            <div class="form-section">
                <!-- BÃ¶lÃ¼m baÅŸlÄ±ÄŸÄ± - emoji ile gÃ¶rsel zenginlik -->
                <h3>â• Yeni KayÄ±t Ekle</h3>
                
                <!-- Ana form elementi - JavaScript ile iÅŸlenecek -->
                <form id="transactionForm">
                    
                    <!-- Ä°lk satÄ±r: TÃ¼r, Miktar ve Tarih alanlarÄ± -->
                    <div class="form-row">
                        
                        <!-- TÃ¼r seÃ§imi (Gelir/Gider) -->
                        <div class="form-group">
                            <label for="type">TÃ¼r:</label>
                            <select id="type" required>
                                <option value="">SeÃ§iniz</option>        <!-- VarsayÄ±lan boÅŸ seÃ§enek -->
                                <option value="income">Gelir</option>     <!-- Gelir seÃ§eneÄŸi -->
                                <option value="expense">Gider</option>    <!-- Gider seÃ§eneÄŸi -->
                            </select>
                        </div>
                        
                        <!-- Miktar giriÅŸi - para birimi TÃ¼rk LirasÄ± -->
                        <div class="form-group">
                            <label for="amount">Miktar (â‚º):</label>
                            <!-- number input: ondalÄ±k destekli, minimum 0, gerekli alan -->
                            <input type="number" id="amount" step="0.01" min="0" required>
                        </div>
                        
                        <!-- Tarih seÃ§imi -->
                        <div class="form-group">
                            <label for="date">Tarih:</label>
                            <input type="date" id="date" required>  <!-- HTML5 tarih seÃ§ici -->
                        </div>
                    </div>
                    
                    <!-- Ä°kinci satÄ±r: AÃ§Ä±klama ve Kategori alanlarÄ± -->
                    <div class="form-row">
                        
                        <!-- AÃ§Ä±klama metni -->
                        <div class="form-group">
                            <label for="description">AÃ§Ä±klama:</label>
                            <input type="text" id="description" required>
                        </div>
                        
                        <!-- Kategori seÃ§imi - baÅŸlangÄ±Ã§ta gizli (JavaScript ile kontrol edilir) -->
                        <div class="form-group" id="categoryGroup" style="display:none;">
                            <label for="category">Kategori:</label>
                            <!-- SeÃ§enekler JavaScript ile dinamik olarak doldurulacak -->
                            <select id="category"></select>
                        </div>
                    </div>
                    
                    <!-- Form gÃ¶nderme butonu -->
                    <button type="submit" class="btn">KayÄ±t Ekle</button>
                </form>
                
                <!-- Mesaj gÃ¶sterme alanÄ± (baÅŸarÄ±/hata mesajlarÄ± iÃ§in) -->
                <div id="messageArea"></div>
            </div>

            <!-- CSV DOSYA Ä°ÅLEMLERÄ° BÃ–LÃœMÃœ -->
            <!-- Bu bÃ¶lÃ¼m veri iÃ§e/dÄ±ÅŸa aktarma iÅŸlemleri iÃ§in -->
            <div class="csv-section">
                <!-- BÃ¶lÃ¼m baÅŸlÄ±ÄŸÄ± -->
                <h3>ğŸ“ CSV Dosya Ä°ÅŸlemleri</h3>
                
                <div class="form-row">
                    <div class="form-group">
                        <!-- CSV olarak dÄ±ÅŸa aktarma butonu -->
                        <!-- onclick ile JavaScript fonksiyonu Ã§aÄŸrÄ±lÄ±r -->
                        <button class="btn btn-success" onclick="exportToCSV()">CSV Olarak Ä°ndir</button>
                        
                        <!-- Dosya seÃ§me input'u - gizli tutulur -->
                        <!-- Sadece .csv dosyalarÄ±nÄ± kabul eder -->
                        <input type="file" id="csvFileInput" accept=".csv" style="display:none;">
                        
                        <!-- CSV yÃ¼kleme butonu - gizli file input'u tetikler -->
                        <button class="btn" onclick="document.getElementById('csvFileInput').click()">CSV YÃ¼kle</button>
                    </div>
                </div>
            </div>

            <!-- VERÄ° TABLOSU BÃ–LÃœMÃœ -->
            <!-- Bu bÃ¶lÃ¼m mevcut kayÄ±tlarÄ± tablo halinde gÃ¶sterir -->
            <div class="data-section">
                <!-- BÃ¶lÃ¼m baÅŸlÄ±ÄŸÄ± -->
                <h2 class="section-title">ğŸ“Š KayÄ±tlarÄ±m</h2>
                
                <!-- Tablo container'Ä± - responsive tasarÄ±m iÃ§in -->
                <div class="table-container">
                    <!-- Ana veri tablosu -->
                    <table id="transactionTable">
                        <!-- Tablo baÅŸlÄ±k satÄ±rÄ± -->
                        <thead>
                            <tr>
                                <th>Tarih</th>      <!-- Tarih sÃ¼tunu -->
                                <th>TÃ¼r</th>        <!-- Gelir/Gider sÃ¼tunu -->
                                <th>AÃ§Ä±klama</th>   <!-- AÃ§Ä±klama sÃ¼tunu -->
                                <th>Kategori</th>   <!-- Kategori sÃ¼tunu -->
                                <th>Miktar</th>     <!-- Para miktarÄ± sÃ¼tunu -->
                                <th>Ä°ÅŸlemler</th>   <!-- DÃ¼zenle/Sil butonlarÄ± sÃ¼tunu -->
                            </tr>
                        </thead>
                        
                        <!-- Tablo gÃ¶vdesi - JavaScript ile dinamik olarak doldurulacak -->
                        <tbody id="transactionTableBody">
                            <!-- Veri satÄ±rlarÄ± buraya JavaScript ile eklenecek -->
                        </tbody>
                    </table>
                </div>
            </div>
        </div>
    </div>

    <script>
        
        // Global deÄŸiÅŸkenler
        let currentUser = null; // Åu anda giriÅŸ yapmÄ±ÅŸ kullanÄ±cÄ±
        let users = []; // TÃ¼m kullanÄ±cÄ±larÄ±n listesi
        let transactions = []; // Aktif kullanÄ±cÄ±nÄ±n iÅŸlemleri
        let categories = ['Yiyecek', 'UlaÅŸÄ±m', 'EÄŸlence', 'Faturalar', 'AlÄ±ÅŸveriÅŸ', 'SaÄŸlÄ±k', 'EÄŸitim']; // VarsayÄ±lan kategoriler

        // === USER AUTHENTICATION SYSTEM ===
        
        // Sayfa yÃ¼klendiÄŸinde Ã§alÄ±ÅŸacak fonksiyon
        document.addEventListener('DOMContentLoaded', function() { // DOM yÃ¼klenince Ã§alÄ±ÅŸ
            loadUsersFromStorage(); // KullanÄ±cÄ±larÄ± localStorage'dan yÃ¼kle
            checkAutoLogin(); // Otomatik giriÅŸ kontrolÃ¼ yap
            
            // Form gÃ¶nderimi iÃ§in olay dinleyicisi
            document.getElementById('transactionForm').addEventListener('submit', handleFormSubmit); // Ä°ÅŸlem formu gÃ¶nderilince handleFormSubmit'i Ã§alÄ±ÅŸtÄ±r
            
            // TÃ¼r deÄŸiÅŸtiÄŸinde kategori alanÄ±nÄ± gÃ¶ster/gizle
            document.getElementById('type').addEventListener('change', toggleCategoryField); // Gelir/gider seÃ§imi deÄŸiÅŸince kategori alanÄ±nÄ± ayarla
            
            // CSV dosya yÃ¼kleme
            document.getElementById('csvFileInput').addEventListener('change', handleCSVUpload); // CSV dosya seÃ§ilince yÃ¼kleme fonksiyonunu Ã§alÄ±ÅŸtÄ±r
        });

        // Otomatik giriÅŸ kontrolÃ¼
        function checkAutoLogin() { // Otomatik giriÅŸ kontrol fonksiyonu
            const savedUser = localStorage.getItem('currentUser'); // localStorage'dan kullanÄ±cÄ± bilgisini al
            if (savedUser) { // EÄŸer kaydedilmiÅŸ kullanÄ±cÄ± varsa
                currentUser = JSON.parse(savedUser); // JSON'dan objeye Ã§evir
                showMainApp(); // Ana uygulamayÄ± gÃ¶ster
            }
        }

        // KullanÄ±cÄ± kayÄ±t
        function register() { // KayÄ±t fonksiyonu
            const fullName = document.getElementById('regFullName').value.trim(); // Ad soyad al ve boÅŸluklarÄ± temizle
            const username = document.getElementById('regUsername').value.trim(); // KullanÄ±cÄ± adÄ±nÄ± al ve boÅŸluklarÄ± temizle
            const password = document.getElementById('regPassword').value; // Åifreyi al
            const email = document.getElementById('regEmail').value.trim(); // Email'i al ve boÅŸluklarÄ± temizle

            if (!fullName || !username || !password || !email) { // EÄŸer herhangi bir alan boÅŸsa
                showAuthMessage('LÃ¼tfen tÃ¼m alanlarÄ± doldurun!', 'error'); // Hata mesajÄ± gÃ¶ster
                return; // Fonksiyondan Ã§Ä±k
            }

            // KullanÄ±cÄ± adÄ± kontrolÃ¼
            if (users.find(u => u.username === username)) { // AynÄ± kullanÄ±cÄ± adÄ± var mÄ± kontrol et
                showAuthMessage('Bu kullanÄ±cÄ± adÄ± zaten kullanÄ±lÄ±yor!', 'error'); // Hata mesajÄ± gÃ¶ster
                return; // Fonksiyondan Ã§Ä±k
            }

            // Email kontrolÃ¼
            if (users.find(u => u.email === email)) { // AynÄ± email var mÄ± kontrol et
                showAuthMessage('Bu e-posta adresi zaten kullanÄ±lÄ±yor!', 'error'); // Hata mesajÄ± gÃ¶ster
                return; // Fonksiyondan Ã§Ä±k
            }

            // Yeni kullanÄ±cÄ± oluÅŸtur
            const newUser = { // Yeni kullanÄ±cÄ± objesi oluÅŸtur
                id: Date.now(), // Benzersiz ID iÃ§in ÅŸu anki zamanÄ± kullan
                fullName, // Ad soyad
                username, // KullanÄ±cÄ± adÄ±
                password, // Åifre (gerÃ§ek uygulamada hash'lenmeli)
                email, // Email
                createdAt: new Date().toISOString(), // OluÅŸturulma tarihi
                transactions: [], // BoÅŸ iÅŸlemler dizisi
                categories: [...categories] // VarsayÄ±lan kategorilerin kopyasÄ±
            };

            users.push(newUser); // Yeni kullanÄ±cÄ±yÄ± diziye ekle
            saveUsersToStorage(); // KullanÄ±cÄ±larÄ± kaydet
            
            showAuthMessage('KayÄ±t baÅŸarÄ±lÄ±! Åimdi giriÅŸ yapabilirsiniz.', 'success'); // BaÅŸarÄ± mesajÄ± gÃ¶ster
            setTimeout(() => { // 1.5 saniye sonra
                showLogin(); // GiriÅŸ formuna geÃ§
            }, 1500);
        }

        // KullanÄ±cÄ± giriÅŸi
        function login() { // GiriÅŸ fonksiyonu
            const username = document.getElementById('username').value.trim(); // KullanÄ±cÄ± adÄ±nÄ± al
            const password = document.getElementById('password').value; // Åifreyi al

            if (!username || !password) { // EÄŸer kullanÄ±cÄ± adÄ± veya ÅŸifre boÅŸsa
                showAuthMessage('KullanÄ±cÄ± adÄ± ve ÅŸifre gerekli!', 'error'); // Hata mesajÄ± gÃ¶ster
                return; // Fonksiyondan Ã§Ä±k
            }

            const user = users.find(u => u.username === username && u.password === password); // KullanÄ±cÄ±yÄ± bul
            
            if (user) { // KullanÄ±cÄ± bulunduysa
                currentUser = user; // Mevcut kullanÄ±cÄ±yÄ± ayarla
                localStorage.setItem('currentUser', JSON.stringify(user)); // localStorage'a kaydet
                showMainApp(); // Ana uygulamayÄ± gÃ¶ster
            } else { // KullanÄ±cÄ± bulunamadÄ±ysa
                showAuthMessage('HatalÄ± kullanÄ±cÄ± adÄ± veya ÅŸifre!', 'error'); // Hata mesajÄ± gÃ¶ster
            }
        }

        // Ã‡Ä±kÄ±ÅŸ yap
        function logout() { // Ã‡Ä±kÄ±ÅŸ fonksiyonu
            if (confirm('Ã‡Ä±kÄ±ÅŸ yapmak istediÄŸinizden emin misiniz?')) { // Onay al
                currentUser = null; // Mevcut kullanÄ±cÄ±yÄ± sÄ±fÄ±rla
                localStorage.removeItem('currentUser'); // localStorage'dan sil
                document.getElementById('loginScreen').classList.remove('hidden'); // GiriÅŸ ekranÄ±nÄ± gÃ¶ster
                document.getElementById('mainApp').classList.add('hidden'); // Ana uygulamayÄ± gizle
                
                // Formu temizle
                document.getElementById('username').value = ''; // KullanÄ±cÄ± adÄ± alanÄ±nÄ± temizle
                document.getElementById('password').value = ''; // Åifre alanÄ±nÄ± temizle
                showLogin(); // GiriÅŸ formunu gÃ¶ster
            }
        }

        // Ana uygulamayÄ± gÃ¶ster
        function showMainApp() { // Ana uygulama gÃ¶sterme fonksiyonu
            document.getElementById('loginScreen').classList.add('hidden'); // GiriÅŸ ekranÄ±nÄ± gizle
            document.getElementById('mainApp').classList.remove('hidden'); // Ana uygulamayÄ± gÃ¶ster
            document.getElementById('currentUserName').textContent = currentUser.fullName; // KullanÄ±cÄ± adÄ±nÄ± gÃ¶ster
            
            // KullanÄ±cÄ± verilerini yÃ¼kle
            transactions = currentUser.transactions || []; // Ä°ÅŸlemleri yÃ¼kle (yoksa boÅŸ dizi)
            categories = currentUser.categories || [...categories]; // Kategorileri yÃ¼kle
            
            initializeApp(); // UygulamayÄ± baÅŸlat
        }

        // Login/Register form deÄŸiÅŸtirme
        function showLogin() { // GiriÅŸ formunu gÃ¶sterme fonksiyonu
            document.getElementById('loginForm').classList.remove('hidden'); // GiriÅŸ formunu gÃ¶ster
            document.getElementById('registerForm').classList.add('hidden'); // KayÄ±t formunu gizle
            clearAuthMessage(); // MesajlarÄ± temizle
        }

        function showRegister() { // KayÄ±t formunu gÃ¶sterme fonksiyonu
            document.getElementById('loginForm').classList.add('hidden'); // GiriÅŸ formunu gizle
            document.getElementById('registerForm').classList.remove('hidden'); // KayÄ±t formunu gÃ¶ster
            clearAuthMessage(); // MesajlarÄ± temizle
        }

        // Auth mesaj gÃ¶sterme
        function showAuthMessage(message, type) { // Kimlik doÄŸrulama mesajÄ± gÃ¶sterme fonksiyonu
            const messageArea = document.getElementById('authMessage'); // Mesaj alanÄ±nÄ± al
            messageArea.innerHTML = `<div class="${type === 'success' ? 'success-message' : 'error-message'}">${message}</div>`; // MesajÄ± gÃ¶ster
        }

        function clearAuthMessage() { // Kimlik doÄŸrulama mesajÄ±nÄ± temizleme fonksiyonu
            document.getElementById('authMessage').innerHTML = ''; // Mesaj alanÄ±nÄ± temizle
        }

        // KullanÄ±cÄ±larÄ± storage'dan yÃ¼kle
        function loadUsersFromStorage() { // KullanÄ±cÄ±larÄ± localStorage'dan yÃ¼kleme fonksiyonu
            const savedUsers = localStorage.getItem('financeAppUsers'); // KaydedilmiÅŸ kullanÄ±cÄ±larÄ± al
            if (savedUsers) { // EÄŸer kaydedilmiÅŸ kullanÄ±cÄ±lar varsa
                users = JSON.parse(savedUsers); // JSON'dan diziye Ã§evir
            }
        }

        // KullanÄ±cÄ±larÄ± storage'a kaydet
        function saveUsersToStorage() { // KullanÄ±cÄ±larÄ± localStorage'a kaydetme fonksiyonu
            localStorage.setItem('financeAppUsers', JSON.stringify(users)); // KullanÄ±cÄ±larÄ± JSON olarak kaydet
        }

        // === MAIN APPLICATION FUNCTIONS ===

        // UygulamayÄ± baÅŸlat
        function initializeApp() { // Uygulama baÅŸlatma fonksiyonu
            updateCategoryList(); // Kategori listesini gÃ¼ncelle
            updateCategorySelect(); // Kategori seÃ§im listesini gÃ¼ncelle
            updateDisplay(); // EkranÄ± gÃ¼ncelle
            updateCategoryAnalysis(); // Kategori analizini gÃ¼ncelle
            drawChart(); // GrafiÄŸi Ã§iz
            setTodayDate(); // BugÃ¼nÃ¼n tarihini ayarla
        }

        // BugÃ¼nÃ¼n tarihini form alanÄ±na set et
        function setTodayDate() { // BugÃ¼nÃ¼n tarihini ayarlama fonksiyonu
            const today = new Date().toISOString().split('T')[0]; // BugÃ¼nÃ¼n tarihini YYYY-MM-DD formatÄ±nda al
            document.getElementById('date').value = today; // Tarih alanÄ±na bugÃ¼nÃ¼n tarihini yaz
        }

        // Kategori alanÄ±nÄ± gÃ¶ster/gizle
        function toggleCategoryField() { // Kategori alanÄ±nÄ± aÃ§ma/kapama fonksiyonu
            const type = document.getElementById('type').value; // SeÃ§ilen tÃ¼rÃ¼ al
            const categoryGroup = document.getElementById('categoryGroup'); // Kategori grubunu al
            
            if (type === 'expense') { // EÄŸer gider seÃ§ildiyse
                categoryGroup.style.display = 'block'; // Kategori alanÄ±nÄ± gÃ¶ster
                document.getElementById('category').required = true; // Kategori seÃ§imini zorunlu yap
            } else { // DeÄŸilse
                categoryGroup.style.display = 'none'; // Kategori alanÄ±nÄ± gizle
                document.getElementById('category').required = false; // Kategori seÃ§imini isteÄŸe baÄŸlÄ± yap
            }
        }

        // Form gÃ¶nderimi iÅŸleme
        function handleFormSubmit(e) { // Form gÃ¶nderim iÅŸleme fonksiyonu
            e.preventDefault(); // VarsayÄ±lan form gÃ¶nderimini engelle
            
            const formData = { // Form verilerini al
                type: document.getElementById('type').value, // TÃ¼r
                amount: parseFloat(document.getElementById('amount').value), // Miktar (sayÄ±ya Ã§evir)
                date: document.getElementById('date').value, // Tarih
                description: document.getElementById('description').value, // AÃ§Ä±klama
                category: document.getElementById('category').value || '' // Kategori (yoksa boÅŸ string)
            };

            // Form doÄŸrulama
            if (!validateForm(formData)) { // Form geÃ§erli deÄŸilse
                return; // Fonksiyondan Ã§Ä±k
            }

            // Yeni iÅŸlem ekle
            addTransaction(formData); // Ä°ÅŸlemi ekle
            
            // Formu temizle
            document.getElementById('transactionForm').reset(); // Formu sÄ±fÄ±rla
            setTodayDate(); // BugÃ¼nÃ¼n tarihini tekrar ayarla
            toggleCategoryField(); // Kategori alanÄ±nÄ± ayarla
            
            showMessage('KayÄ±t baÅŸarÄ±yla eklendi!', 'success'); // BaÅŸarÄ± mesajÄ± gÃ¶ster
        }

        // Form doÄŸrulama
        function validateForm(data) { // Form doÄŸrulama fonksiyonu
            if (!data.type || !data.amount || !data.date || !data.description) { // Gerekli alanlar boÅŸsa
                showMessage('LÃ¼tfen tÃ¼m gerekli alanlarÄ± doldurun!', 'error'); // Hata mesajÄ± gÃ¶ster
                return false; // GeÃ§ersiz
            }

            if (data.amount <= 0) { // Miktar sÄ±fÄ±r veya negatifse
                showMessage('Miktar pozitif bir deÄŸer olmalÄ±dÄ±r!', 'error'); // Hata mesajÄ± gÃ¶ster
                return false; // GeÃ§ersiz
            }

            if (data.type === 'expense' && !data.category) { // Gider tÃ¼rÃ¼ seÃ§ilmiÅŸ ama kategori yoksa
                showMessage('Gider iÃ§in kategori seÃ§imi zorunludur!', 'error'); // Hata mesajÄ± gÃ¶ster
                return false; // GeÃ§ersiz
            }

            const dateRegex = /^\d{4}-\d{2}-\d{2}$/; // Tarih formatÄ±nÄ± kontrol eden regex
            if (!dateRegex.test(data.date)) { // Tarih formatÄ± yanlÄ±ÅŸsa
                showMessage('GeÃ§erli bir tarih giriniz!', 'error'); // Hata mesajÄ± gÃ¶ster
                return false; // GeÃ§ersiz
            }

            return true; // GeÃ§erli
        }

        // Yeni iÅŸlem ekleme
        function addTransaction(data) { // Ä°ÅŸlem ekleme fonksiyonu
            const transaction = { // Yeni iÅŸlem objesi
                id: Date.now(), // Benzersiz ID
                userId: currentUser.id, // KullanÄ±cÄ± ID'si
                ...data, // Form verilerini ekle
                timestamp: new Date().toISOString() // Ekleme zamanÄ±
            };

            transactions.push(transaction); // Ä°ÅŸlemi diziye ekle
            saveUserData(); // KullanÄ±cÄ± verilerini kaydet
            updateDisplay(); // EkranÄ± gÃ¼ncelle
            updateCategoryAnalysis(); // Kategori analizini gÃ¼ncelle
            drawChart(); // GrafiÄŸi yeniden Ã§iz
        }

        // Ä°ÅŸlem silme
        function deleteTransaction(id) { // Ä°ÅŸlem silme fonksiyonu
            if (confirm('Bu kaydÄ± silmek istediÄŸinizden emin misiniz?')) { // Onay al
                transactions = transactions.filter(t => t.id !== parseInt(id)); // Ä°ÅŸlemi diziden Ã§Ä±kar
                saveUserData(); // KullanÄ±cÄ± verilerini kaydet
                updateDisplay(); // EkranÄ± gÃ¼ncelle
                updateCategoryAnalysis(); // Kategori analizini gÃ¼ncelle
                drawChart(); // GrafiÄŸi yeniden Ã§iz
                showMessage('KayÄ±t baÅŸarÄ±yla silindi!', 'success'); // BaÅŸarÄ± mesajÄ± gÃ¶ster
            }
        }

        // Kategori ekleme
        function addCategory() { // Kategori ekleme fonksiyonu
            const newCategory = document.getElementById('newCategory').value.trim(); // Yeni kategori adÄ±nÄ± al
            
            if (!newCategory) { // Kategori adÄ± boÅŸsa
                showMessage('Kategori adÄ± boÅŸ olamaz!', 'error'); // Hata mesajÄ± gÃ¶ster
                return; // Fonksiyondan Ã§Ä±k
            }

            if (categories.includes(newCategory)) { // Kategori zaten varsa
                showMessage('Bu kategori zaten mevcut!', 'error'); // Hata mesajÄ± gÃ¶ster
                return; // Fonksiyondan Ã§Ä±k
            }

            categories.push(newCategory); // Kategoriyi diziye ekle
            document.getElementById('newCategory').value = ''; // Input alanÄ±nÄ± temizle
            updateCategoryList(); // Kategori listesini gÃ¼ncelle
            updateCategorySelect(); // Kategori seÃ§im listesini gÃ¼ncelle
            saveUserData(); // KullanÄ±cÄ± verilerini kaydet
            showMessage('Kategori baÅŸarÄ±yla eklendi!', 'success'); // BaÅŸarÄ± mesajÄ± gÃ¶ster
        }

        // Kategori silme
        function removeCategory(categoryName) { // Kategori silme fonksiyonu
            if (confirm(`"${categoryName}" kategorisini silmek istediÄŸinizden emin misiniz?`)) { // Onay al
                // Ã–nce bu kategoriye ait giderleri kontrol et
                const categoryTransactions = transactions.filter(t => t.category === categoryName); // Bu kategorideki iÅŸlemleri bul
                
                if (categoryTransactions.length > 0) { // EÄŸer bu kategoride iÅŸlemler varsa
                    if (!confirm(`Bu kategoriye ait ${categoryTransactions.length} gider kaydÄ± var. Kategori silinirse bu kayÄ±tlar "DiÄŸer" kategorisine taÅŸÄ±nacak. Devam etmek istiyor musunuz?`)) { // Tekrar onay al
                        return; // Fonksiyondan Ã§Ä±k
                    }
                    
                    // "DiÄŸer" kategorisini ekle (yoksa)
                    if (!categories.includes('DiÄŸer')) { // "DiÄŸer" kategorisi yoksa
                        categories.push('DiÄŸer'); // "DiÄŸer" kategorisini ekle
                    }
                    
                    // Ä°lgili iÅŸlemleri "DiÄŸer" kategorisine taÅŸÄ±
                    transactions.forEach(t => { // Her iÅŸlem iÃ§in
                        if (t.category === categoryName) { // EÄŸer silinecek kategorideyse
                            t.category = 'DiÄŸer'; // "DiÄŸer" kategorisine taÅŸÄ±
                        }
                    });
                }
                
                // Kategoriyi sil
                categories = categories.filter(c => c !== categoryName); // Kategoriyi diziden Ã§Ä±kar
                updateCategoryList(); // Kategori listesini gÃ¼ncelle
                updateCategorySelect(); // Kategori seÃ§im listesini gÃ¼ncelle
                updateCategoryAnalysis(); // Kategori analizini gÃ¼ncelle
                saveUserData(); // KullanÄ±cÄ± verilerini kaydet
                showMessage('Kategori baÅŸarÄ±yla silindi!', 'success'); // BaÅŸarÄ± mesajÄ± gÃ¶ster
            }
        }

        // KullanÄ±cÄ± verilerini kaydetme
        function saveUserData() { // KullanÄ±cÄ± verilerini kaydetme fonksiyonu
            if (currentUser) { // EÄŸer mevcut kullanÄ±cÄ± varsa
                currentUser.transactions = transactions; // Ä°ÅŸlemleri kullanÄ±cÄ±ya ata
                currentUser.categories = categories; // Kategorileri kullanÄ±cÄ±ya ata
                
                // Users dizisindeki kullanÄ±cÄ±yÄ± gÃ¼ncelle
                const userIndex = users.findIndex(u => u.id === currentUser.id); // KullanÄ±cÄ±nÄ±n dizideki indeksini bul
                if (userIndex !== -1) { // KullanÄ±cÄ± bulunduysa
                    users[userIndex] = currentUser; // KullanÄ±cÄ±yÄ± gÃ¼ncelle
                }
                
                // Local storage'Ä± gÃ¼ncelle
                localStorage.setItem('currentUser', JSON.stringify(currentUser)); // Mevcut kullanÄ±cÄ±yÄ± kaydet
                saveUsersToStorage(); // TÃ¼m kullanÄ±cÄ±larÄ± kaydet
            }
        }

        // Kategori listesini gÃ¼ncelleme
        function updateCategoryList() { // Kategori listesini gÃ¼ncelleme fonksiyonu
            const categoryList = document.getElementById('categoryList'); // Kategori listesi elementini al
            categoryList.innerHTML = ''; // Listeyi temizle
            
            categories.forEach(category => { // Her kategori iÃ§in
                const categoryTag = document.createElement('div'); // Yeni div elementi oluÅŸtur
                categoryTag.className = 'category-tag'; // CSS sÄ±nÄ±fÄ±nÄ± ata
                categoryTag.innerHTML = `
                    ${category}
                    <button class="category-remove" onclick="removeCategory('${category}')" title="Kategoriyi Sil">
                        Ã—
                    </button>
                `; // Ä°Ã§eriÄŸi ayarla
                categoryList.appendChild(categoryTag); // Listeye ekle
            });
        }

        // Kategori select'ini gÃ¼ncelleme
        function updateCategorySelect() { // Kategori seÃ§im listesini gÃ¼ncelleme fonksiyonu
            const categorySelect = document.getElementById('category'); // Kategori seÃ§im elementini al
            categorySelect.innerHTML = '<option value="">Kategori SeÃ§iniz</option>'; // VarsayÄ±lan seÃ§eneÄŸi ekle
            
            categories.forEach(category => { // Her kategori iÃ§in
                const option = document.createElement('option'); // Yeni option elementi oluÅŸtur
                option.value = category; // DeÄŸeri ayarla
                option.textContent = category; // Metni ayarla
                categorySelect.appendChild(option); // SeÃ§im listesine ekle
            });
        }

        // EkranÄ± gÃ¼ncelleme
        function updateDisplay() { // Ekran gÃ¼ncelleme fonksiyonu
            updateSummaryCards(); // Ã–zet kartlarÄ±nÄ± gÃ¼ncelle
            updateTransactionTable(); // Ä°ÅŸlem tablosunu gÃ¼ncelle
        }

        // Ã–zet kartlarÄ±nÄ± gÃ¼ncelleme
        function updateSummaryCards() { // Ã–zet kartlarÄ±nÄ± gÃ¼ncelleme fonksiyonu
            const totalIncome = transactions // Toplam geliri hesapla
                .filter(t => t.type === 'income') // Sadece gelir iÅŸlemlerini filtrele
                .reduce((sum, t) => sum + t.amount, 0); // MiktarlarÄ± topla
                
            const totalExpense = transactions // Toplam gideri hesapla
                .filter(t => t.type === 'expense') // Sadece gider iÅŸlemlerini filtrele
                .reduce((sum, t) => sum + t.amount, 0); // MiktarlarÄ± topla
                
            const netBalance = totalIncome - totalExpense; // Net bakiyeyi hesapla

            document.getElementById('totalIncome').textContent = formatCurrency(totalIncome); // Toplam geliri gÃ¶ster
            document.getElementById('totalExpense').textContent = formatCurrency(totalExpense); // Toplam gideri gÃ¶ster
            document.getElementById('netBalance').textContent = formatCurrency(netBalance); // Net bakiyeyi gÃ¶ster
            
            // Bakiye rengi
            const balanceElement = document.getElementById('netBalance'); // Bakiye elementini al
            balanceElement.style.color = netBalance >= 0 ? '#28a745' : '#dc3545'; // Pozitifse yeÅŸil, negatifse kÄ±rmÄ±zÄ±
        }

        // Para birimi formatÄ±
        function formatCurrency(amount) { // Para birimi formatlama fonksiyonu
            return new Intl.NumberFormat('tr-TR', { // TÃ¼rkÃ§e formatlama
                style: 'currency', // Para birimi stili
                currency: 'TRY', // TÃ¼rk LirasÄ±
                minimumFractionDigits: 2 // En az 2 ondalÄ±k basamak
            }).format(amount); // Formatla ve dÃ¶ndÃ¼r
        }

        // Ä°ÅŸlem tablosunu gÃ¼ncelleme
        function updateTransactionTable() { // Ä°ÅŸlem tablosunu gÃ¼ncelleme fonksiyonu
            const tableBody = document.getElementById('transactionTableBody'); // Tablo gÃ¶vdesini al
            tableBody.innerHTML = ''; // Tabloyu temizle

            // Ä°ÅŸlemleri tarihe gÃ¶re sÄ±rala (en yeni en Ã¼stte)
            const sortedTransactions = [...transactions].sort((a, b) => new Date(b.date) - new Date(a.date)); // Ä°ÅŸlemleri tarihe gÃ¶re sÄ±rala

            sortedTransactions.forEach(transaction => { // Her iÅŸlem iÃ§in
                const row = document.createElement('tr'); // Yeni tablo satÄ±rÄ± oluÅŸtur
                row.innerHTML = ` 
                    <td>${formatDate(transaction.date)}</td>
                    <td>
                        <span class="badge ${transaction.type === 'income' ? 'badge-success' : 'badge-danger'}">
                            ${transaction.type === 'income' ? 'ğŸ“ˆ Gelir' : 'ğŸ“‰ Gider'}
                        </span>
                    </td>
                    <td>${transaction.description}</td>
                    <td>${transaction.category || '-'}</td>
                    <td>
                        <strong class="${transaction.type === 'income' ? 'text-success' : 'text-danger'}">
                            ${transaction.type === 'income' ? '+' : '-'}${formatCurrency(Math.abs(transaction.amount))}
                        </strong>
                    </td>
                    <td>
                        <button class="delete-btn" onclick="deleteTransaction(${transaction.id})" title="Sil">
                            ğŸ—‘ï¸ Sil
                        </button>
                    </td>
                `;
                tableBody.appendChild(row); // SatÄ±rÄ± tabloya ekle
            });

            // EÄŸer hiÃ§ iÅŸlem yoksa mesaj gÃ¶ster
            if (transactions.length === 0) { // Ä°ÅŸlem yoksa
                const row = document.createElement('tr'); // Yeni satÄ±r oluÅŸtur
                row.innerHTML = ` 
                    <td colspan="6" style="text-align: center; padding: 40px; color: #6c757d;">
                        ğŸ“Š HenÃ¼z hiÃ§ kayÄ±t eklenmemiÅŸ. YukarÄ±daki formdan yeni kayÄ±t ekleyebilirsiniz.
                    </td>
                `;
                tableBody.appendChild(row); // SatÄ±rÄ± tabloya ekle
            }
        }

        // Tarih formatÄ±
        function formatDate(dateString) { // Tarih formatlama fonksiyonu
            const date = new Date(dateString); // String'i Date objesine Ã§evir
            return date.toLocaleDateString('tr-TR', { // TÃ¼rkÃ§e tarih formatÄ±
                year: 'numeric', // YÄ±l
                month: 'long', // Uzun ay adÄ±
                day: 'numeric' // GÃ¼n
            });
        }

        // Kategori analizini gÃ¼ncelleme
        function updateCategoryAnalysis() { // Kategori analiz gÃ¼ncelleme fonksiyonu
            const categoryStats = document.getElementById('categoryStats'); // Kategori istatistik alanÄ±nÄ± al
            categoryStats.innerHTML = ''; // AlanÄ± temizle

            // Gider kategorilerini grupla
            const expensesByCategory = {}; // Kategoriye gÃ¶re giderler objesi
            transactions
                .filter(t => t.type === 'expense') // Sadece giderleri filtrele
                .forEach(t => { // Her gider iÃ§in
                    const category = t.category || 'Kategorisiz'; // Kategori adÄ±nÄ± al (yoksa 'Kategorisiz')
                    expensesByCategory[category] = (expensesByCategory[category] || 0) + t.amount; // Kategori toplamÄ±na ekle
                });

            // Kategori istatistiklerini gÃ¶ster
            Object.entries(expensesByCategory) // Kategori giriÅŸlerini al
                .sort(([,a], [,b]) => b - a) // BÃ¼yÃ¼kten kÃ¼Ã§Ã¼ÄŸe sÄ±rala
                .forEach(([category, amount]) => { // Her kategori iÃ§in
                    const totalExpense = transactions // Toplam gideri hesapla
                        .filter(t => t.type === 'expense') // Sadece giderleri filtrele
                        .reduce((sum, t) => sum + t.amount, 0); // Topla
                    
                    const percentage = totalExpense > 0 ? (amount / totalExpense * 100).toFixed(1) : 0; // YÃ¼zdeyi hesapla
                    
                    const statCard = document.createElement('div'); // Yeni istatistik kartÄ± oluÅŸtur
                    statCard.className = 'category-stat-card'; // CSS sÄ±nÄ±fÄ±nÄ± ata
                    statCard.innerHTML = `
                        <h4>ğŸ·ï¸ ${category}</h4>
                        <div class="stat-amount">${formatCurrency(amount)}</div>
                        <div style="font-size: 0.9rem; color: #6c757d; margin-top: 5px;">
                            Toplam giderin %${percentage}'i
                        </div>
                    `;
                    categoryStats.appendChild(statCard); // KartÄ± alana ekle
                });

            // EÄŸer hiÃ§ gider yoksa mesaj gÃ¶ster
            if (Object.keys(expensesByCategory).length === 0) { // HiÃ§ kategori yoksa
                categoryStats.innerHTML = `
                    <div style="text-align: center; padding: 20px; color: #6c757d;">
                        ğŸ“Š HenÃ¼z hiÃ§ gider kaydÄ± yok.
                    </div>
                `;
            }
        }

        // Basit grafik Ã§izimi (Canvas kullanarak)
        function drawChart() {
            const canvas = document.getElementById('incomeExpenseChart');
            const ctx = canvas.getContext('2d');
            
            // Canvas'Ä± temizle
            ctx.clearRect(0, 0, canvas.width, canvas.height);
            
            const totalIncome = transactions
                .filter(t => t.type === 'income')
                .reduce((sum, t) => sum + t.amount, 0);
                
            const totalExpense = transactions
                .filter(t => t.type === 'expense')
                .reduce((sum, t) => sum + t.amount, 0);

            const total = totalIncome + totalExpense;
            
            if (total === 0) {
                // Veri yoksa mesaj gÃ¶ster
                ctx.fillStyle = '#6c757d';
                ctx.font = '16px Arial';
                ctx.textAlign = 'center';
                ctx.fillText('Grafik iÃ§in veri bekleniyor...', canvas.width / 2, canvas.height / 2);
                return;
            }

            // Pasta grafiÄŸi Ã§iz
            const centerX = canvas.width / 2;
            const centerY = canvas.height / 2;
            const radius = Math.min(centerX, centerY) - 20;

            let startAngle = 0;

            // Gelir dilimi
            if (totalIncome > 0) {
                const incomeAngle = (totalIncome / total) * 2 * Math.PI;
                
                ctx.beginPath();
                ctx.moveTo(centerX, centerY);
                ctx.arc(centerX, centerY, radius, startAngle, startAngle + incomeAngle);
                ctx.closePath();
                ctx.fillStyle = '#28a745';
                ctx.fill();
                
                startAngle += incomeAngle;
            }

            // Gider dilimi
            if (totalExpense > 0) {
                const expenseAngle = (totalExpense / total) * 2 * Math.PI;
                
                ctx.beginPath();
                ctx.moveTo(centerX, centerY);
                ctx.arc(centerX, centerY, radius, startAngle, startAngle + expenseAngle);
                ctx.closePath();
                ctx.fillStyle = '#dc3545';
                ctx.fill();
            }

            // AÃ§Ä±klamalar
            ctx.fillStyle = '#6c757d';
            ctx.font = '14px Arial';
            ctx.fillText('ğŸ“ˆ Gelir: ' + formatCurrency(totalIncome), centerX - 80, canvas.height - 40);
            
            ctx.fillStyle = '#6c757d';
            ctx.fillText('ğŸ“‰ Gider: ' + formatCurrency(totalExpense), centerX - 80, canvas.height - 20);
        }

        // Mesaj gÃ¶sterme
        function showMessage(message, type) {
            const messageArea = document.getElementById('messageArea');
            const messageClass = type === 'success' ? 'success-message' : 'error-message';
            
            messageArea.innerHTML = `<div class="${messageClass}">${message}</div>`;
            
            // 3 saniye sonra mesajÄ± temizle
            setTimeout(() => {
                messageArea.innerHTML = '';
            }, 3000);
        }

        // === CSV Ä°ÅLEMLERÄ° ===

        // CSV olarak dÄ±ÅŸa aktarma
        function exportToCSV() {
            if (transactions.length === 0) {
                showMessage('DÄ±ÅŸa aktarÄ±lacak veri bulunmuyor!', 'error');
                return;
            }

            const headers = ['Tarih', 'TÃ¼r', 'AÃ§Ä±klama', 'Kategori', 'Miktar'];
            const csvContent = [
                headers.join(','),
                ...transactions.map(t => [
                    t.date,
                    t.type === 'income' ? 'Gelir' : 'Gider',
                    `"${t.description}"`, // TÄ±rnak iÃ§ine al
                    t.category || '',
                    t.amount
                ].join(','))
            ].join('\n');

            // UTF-8 BOM ekle (TÃ¼rkÃ§e karakterler iÃ§in)
            const BOM = '\uFEFF';
            const blob = new Blob([BOM + csvContent], { type: 'text/csv;charset=utf-8;' });
            
            const link = document.createElement('a');
            const url = URL.createObjectURL(blob);
            link.setAttribute('href', url);
            link.setAttribute('download', `finans_kayitlari_${new Date().toISOString().split('T')[0]}.csv`);
            link.style.visibility = 'hidden';
            document.body.appendChild(link);
            link.click();
            document.body.removeChild(link);
            
            showMessage('CSV dosyasÄ± baÅŸarÄ±yla indirildi!', 'success');
        }

        // CSV dosya yÃ¼kleme
        function handleCSVUpload(event) {
            const file = event.target.files[0];
            if (!file) return;

            if (!file.name.toLowerCase().endsWith('.csv')) {
                showMessage('LÃ¼tfen geÃ§erli bir CSV dosyasÄ± seÃ§in!', 'error');
                return;
            }

            const reader = new FileReader();
            reader.onload = function(e) {
                try {
                    parseCSVContent(e.target.result);
                } catch (error) {
                    showMessage('CSV dosyasÄ± okuma hatasÄ±: ' + error.message, 'error');
                }
            };
            reader.readAsText(file, 'UTF-8');
        }

        // CSV iÃ§eriÄŸini ayrÄ±ÅŸtÄ±rma
        function parseCSVContent(csvContent) {
            const lines = csvContent.split('\n').filter(line => line.trim());
            
            if (lines.length < 2) {
                showMessage('CSV dosyasÄ± geÃ§ersiz veya boÅŸ!', 'error');
                return;
            }

            const headers = lines[0].split(',').map(h => h.trim());
            let importedCount = 0;
            let errorCount = 0;

            for (let i = 1; i < lines.length; i++) {
                try {
                    const values = parseCSVLine(lines[i]);
                    
                    if (values.length >= 5) {
                        const transaction = {
                            id: Date.now() + Math.random(), // Benzersiz ID
                            userId: currentUser.id,
                            date: values[0],
                            type: values[1].toLowerCase().includes('gelir') ? 'income' : 'expense',
                            description: values[2].replace(/"/g, ''), // TÄ±rnaklarÄ± kaldÄ±r
                            category: values[3] || '',
                            amount: parseFloat(values[4]),
                            timestamp: new Date().toISOString()
                        };

                        // Basit doÄŸrulama
                        if (transaction.date && transaction.description && transaction.amount > 0) {
                            transactions.push(transaction);
                            importedCount++;
                        } else {
                            errorCount++;
                        }
                    } else {
                        errorCount++;
                    }
                } catch (error) {
                    errorCount++;
                }
            }

            if (importedCount > 0) {
                saveUserData();
                updateDisplay();
                updateCategoryAnalysis();
                drawChart();
                showMessage(`${importedCount} kayÄ±t baÅŸarÄ±yla iÃ§e aktarÄ±ldÄ±! ${errorCount > 0 ? `(${errorCount} hatalÄ± satÄ±r atlandÄ±)` : ''}`, 'success');
            } else {
                showMessage('HiÃ§bir geÃ§erli kayÄ±t bulunamadÄ±!', 'error');
            }

            // File input'u sÄ±fÄ±rla
            document.getElementById('csvFileInput').value = '';
        }

        // CSV satÄ±rÄ±nÄ± ayrÄ±ÅŸtÄ±rma (basit parser)
        function parseCSVLine(line) {
            const result = [];
            let current = '';
            let inQuotes = false;
            
            for (let i = 0; i < line.length; i++) {
                const char = line[i];
                
                if (char === '"') {
                    inQuotes = !inQuotes;
                } else if (char === ',' && !inQuotes) {
                    result.push(current.trim());
                    current = '';
                } else {
                    current += char;
                }
            }
            
            result.push(current.trim());
            return result;
        }

        // Sayfa yÃ¼klendiÄŸinde Ã§alÄ±ÅŸacak ek CSS
        const additionalStyles = `
            .badge {
                padding: 4px 8px;
                border-radius: 12px;
                font-size: 0.75rem;
                font-weight: 600;
            }
            
            .badge-success {
                background-color: #d4edda;
                color: #155724;
            }
            
            .badge-danger {
                background-color: #f8d7da;
                color: #721c24;
            }
            
            .text-success {
                color: #28a745 !important;
            }
            
            .text-danger {
                color: #dc3545 !important;
            }
            
            .table-container {
                max-height: 600px;
                overflow-y: auto;
            }
            
            .table-container::-webkit-scrollbar {
                width: 8px;
            }
            
            .table-container::-webkit-scrollbar-track {
                background: #f1f1f1;
                border-radius: 10px;
            }
            
            .table-container::-webkit-scrollbar-thumb {
                background: #888;
                border-radius: 10px;
            }
            
            .table-container::-webkit-scrollbar-thumb:hover {
                background: #555;
            }
        `;

        // Ek stilleri head'e ekle
        const styleSheet = document.createElement('style');
        styleSheet.textContent = additionalStyles;
        document.head.appendChild(styleSheet);
    </script>
</body>
</html>